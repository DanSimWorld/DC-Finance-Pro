<div class="dashboard-container">

  <div class="filter-section">
    <div class="year-nav">
      <button (click)="selectedYear.set(selectedYear() - 1)">‚¨ÖÔ∏è</button>
      <h2>{{ selectedYear() }}</h2>
      <button (click)="selectedYear.set(selectedYear() + 1)">‚û°Ô∏è</button>
    </div>
    <div class="quarter-nav">
      <button *ngFor="let q of [1,2,3,4]"
              [class.active]="selectedQuarter() === q"
              (click)="selectedQuarter.set(q)">
        Kwartaal {{ q }}
      </button>
    </div>
  </div>

  <div class="stats-grid">
    <div class="card winst">
      <label>Netto Winst (Excl. BTW)</label>
      <p>‚Ç¨ {{ stats().winst | number:'1.2-2' }}</p>
    </div>
    <div class="card btw">
      <label>BTW Afdracht (Dit kwartaal)</label>
      <p [style.color]="stats().teBetalenBtw > 0 ? 'red' : 'green'">
        ‚Ç¨ {{ stats().teBetalenBtw | number:'1.2-2' }}
      </p>
    </div>
    <div class="card tax">
      <label>Reserveren voor Inkomstenbelasting (30%)</label>
      <p>‚Ç¨ {{ stats().reserveringIB | number:'1.2-2' }}</p>
    </div>
  </div>

  <div class="table-container">
    <h3>Transacties Q{{ selectedQuarter() }}</h3>
    <table *ngIf="filteredTransactions().length > 0; else noData">
      <thead>
      <tr>
        <th>Datum</th>
        <th>Omschrijving</th>
        <th>Type</th>
        <th>Excl. BTW</th>
        <th>BTW</th>
        <th>Incl. BTW</th>
        <th>Acties</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let t of filteredTransactions()">
        <td>{{ t.date | date:'dd-MM-yyyy' }}</td>
        <td>{{ t.description }}</td>
        <td><span [class]="'badge ' + t.type">{{ t.type }}</span></td>
        <td>‚Ç¨ {{ t.amountExclVat | number:'1.2-2' }}</td>
        <td>‚Ç¨ {{ t.vatAmount | number:'1.2-2' }} ({{ t.vatPercentage }}%)</td>
        <td><strong>‚Ç¨ {{ t.amountInclVat | number:'1.2-2' }}</strong></td>
        <td>
          <button class="delete-btn" (click)="onDelete(t.id)">üóëÔ∏è</button>
        </td>
      </tr>
      </tbody>
    </table>
    <ng-template #noData>
      <p class="empty-state">Geen transacties gevonden voor deze periode.</p>
    </ng-template>
  </div>
</div>
